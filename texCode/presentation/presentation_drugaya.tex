% !TeX encoding = windows-1251
\documentclass[fullscreen=true,russian,compress,%
	hyperref={unicode,bookmarks=false}]{presentation}
\inputencoding{cp1251} % Кодировка вашего файла 
% Внимание! Опция russian не совместима с \tableofcontents
\usepackage[russian]{babel} % Эту строку можно удалить
\usepackage{paratype} % Выбираем шрифт
% Определяем длины частей нижнего колонтитула: автор, название, число слайдов
\makefootline{.35}{.55}{.1} % Сумма длин = 1

\usepackage{tikz} % Для создания рисунков с помощью tikz
\usepackage{listings} % Для листингов программ

\begin{document}

\newtheorem{Metric}{Метрика}
\newtheorem{weight}{Распределение весов}
% Если потребуется, переводим названия блоков с английского:
\deftranslation[to=Russian]{Theorem}{Теорема}
\deftranslation[to=Russian]{Example}{Пример}
%\deftranslation[to=Russian]{Metric}{Метрика}

% Данные титульного слайда
\title[Стратегии для <<Игры в подстановки>>]{Стратегии для <<Игры в подстановки>>}
\author{Гладков Артемий Николаевич}
\institute{Научный руководитель: к. ф.-м. н., доцент, А.\,В.~Смирнов}
\date{17.06.2024}

% Создаем титульный слайд
\begin{frame}
\titlepage
\end{frame}

% \tableofcontents не работает при включенной опции russian пакета babel
%\begin{frame}{Содержание}\tableofcontents\end{frame}

\section{Постановка задачи}

\begin{frame}{Постановка задачи}
	\begin{columns}[T]
		\begin{column}{.30\paperwidth}
			Пример грамматики:
			\begin{enumerate}
				\setcounter{enumi}{1}
				\item $S \rightarrow ABC$
				\item $A \rightarrow aA \mid B$
				\item $A \rightarrow bc \mid CA$
				\item $A \rightarrow a$
				\item $S \rightarrow AB \mid AC$
				\item $B \rightarrow b$
				\item $B \rightarrow BBB$
				\item $C \rightarrow AA \mid c$
				\item $C \rightarrow A \mid B \mid c$
				\item $C \rightarrow T \mid A$
				\item $B \rightarrow abacabade$
			\end{enumerate}
		\end{column}
	
		\begin{column}{.65\paperwidth}
		\begin{itemize}
			\item Дана контекстно-свободная грамматика. Целью игроков является построение как можно большего количества сентенций большей длины.
			\item Игрок бросает 2 шестигранных кубика.
			\item Выпавшая сумма определяет группу продукций, которую игрок обязан применить к одному из своих выводов.
			\item Если это невозможно продукция отправляется в банк.
			\item После применения выпавшей продукции игрок также обязан применить все доступные продукции из банка.
		\end{itemize}
		
%		Для совершения хода игрок бросает 2 шестигранных кубика. Выпавшая сумма определяет группу продукций. Игрок обязан применить одну продукцию из выпавшей группы к одному из своих выводов, если это возможно. Иначе продукция отправляется в банк.
		\end{column}
	\end{columns}	
\end{frame}

\begin{frame}{Родственные исследования}
	В исследовании Schuster~M. Context-free games on strings and nested words~\cite{Schuster:2017} рассматриваются контекстно-свободные игры, формулировка которых звучит как:
	\begin{itemize}
		\item Первому игроку доступен выбор нетерминала, который необходимо заменить,
		\item второй игрок выбирает какую последовательность символов, соответствующую правилам данной КС-грамматики, вставить.
		\item Вопрос в том, имеет ли первый игрок выигрышную стратегию, если его задача получить одну из сентенциальных форм из определённого множества.
	\end{itemize}	
	В работе рассматривается вопрос разрешимости и проводится анализ сложности этой задачи при разных ограничениях и дополнительных условиях.
	  
\end{frame}

\begin{frame}{Случайная стратегия}
	Идея заключается в совершении случайного хода. Выбор групп продукций, продукций и выводов делается равновероятно. 
	\begin{weight}
		\label{weight1}
		Равные веса:\[\omega_1(\alpha) = 1,\] где $\alpha$ "--- группа продукций, продукция или вывод.
	\end{weight}
	Вероятность выбора варианта равна его весу делённому на сумму весов всех вариантов.
\end{frame}

\begin{frame}{Глупая стратегия коротких слов}
	\begin{itemize}
		\item Призвана строить законченные выводы кратчайшим способом. 
		\item Основана на анализе грамматики. 
		\item Для оценки продукций и выводов используется метрика 1. 
		\item На каждом шаге к выводу с лучшей метрикой применяется продукция с лучшей метрикой.
		\item Бесполезные продукции и циклы в грамматике могут сильно мешать работе стратегии.
	\end{itemize}
\end{frame}

\begin{frame}{Используемые метрики}
	\begin{Metric}[$M_1$]
		\begin{enumerate}
			\item Метрика строки $\alpha$ равна количеству нетерминалов в ней.
			
			\item Метрика продукции $A \rightarrow \alpha$: \[M_1(A\rightarrow\alpha)=M_1(\alpha).\]
			
			\item Метрика группы продукций $A \rightarrow \alpha_1\mid \ldots \mid \alpha_k$: \[M_1(A \rightarrow \alpha_1\mid\ldots\mid\alpha_k)=\min_{1 \leqslant i \leqslant k}M_1(A\rightarrow\alpha_i).\]
		\end{enumerate}
	\end{Metric}
	Чем метрика меньше, тем продукция(вывод) лучше.
\end{frame}

\begin{frame}{Используемые метрики}
	\begin{Metric}[$M_2$]
		Она строится итеративно:
		\begin{enumerate}
			\item Изначально метрика каждой продукции равна~$0$.
			
			\item $M_2(A \rightarrow \alpha_1\mid\ldots\mid\alpha_k)=\max_{1 \leqslant i \leqslant k}M_2(A\rightarrow\alpha_i).$
			
			\item \[M_2(\alpha)=\prod_{a \in \alpha}M_2(a), \quad M_2(A \rightarrow \alpha)=M_2(\alpha).\]
			
			$M_2(a)=1\,\forall a \in T, \quad M_2(A)=\sum M_2(q)\cdot p(q)\,\forall A \in N,$ где\\ $q$ "--- группа продукций вида $A \rightarrow \gamma$, $p(q)$ "--- шанс выпадения $q$.
			
			\item Переходим к шагу 2.
		\end{enumerate}	
	\end{Metric}
	Чем метрика $M_1$ меньше, тем продукция(вывод) лучше.
	
	Метрика терминальной строки равна 1.
	
	Метрика строки с бесполезными нетерминалами равна 0.
\end{frame}

\begin{frame}{Использование метрики 2}
	\begin{block}{Стратегия коротких слов}
		Является улучшенным вариантом предыдущей стратегии.
		Использует метрику 2. 
		
		Успешно получается строить законченные выводы.
	\end{block}	

	\begin{block}{Переборная стратегия}
		Стратегия основана на переборе возможных шагов и выборе лучшего из получаемых выводов. Из-за невозможность полного перебора ходов глубина перебора ограничена. Выводы оцениваются с помощью метрики 2. 
	\end{block}	
\end{frame}


	
	
\begin{frame}{Умная случайная стратегия}

	Является модификацией случайной стратегии. Идея заключается в выборе продукций и выводов с разной вероятностью. Веса продукций и выводов определяются метрикой 2:
	
	\begin{weight}
		\label{weight2}
		Веса в~соответствии с~метрикой~2:
		
		\[\omega_2(\alpha) = M_2(\alpha),\] где $\alpha$ "--- группа продукций, продукция или слово.
	\end{weight}
	
	
	В большинстве ситуация ведёт себя как стратегия коротких слов.
	
	Это происходит из-за слишком быстрого приближения метрики 2 к нулю при увеличении количества нетерминалов в выводе.

\end{frame}

\begin{frame}{Используемые метрики}
	\begin{Metric}[$M_3$]
		Она строится итеративно:
		\begin{enumerate}
			\item Изначально метрика каждой продукции равна $0$.
			\item $M_3(A \rightarrow \alpha_1\mid\ldots\mid\alpha_k)=\max_{1 \leqslant i \leqslant k}M_3(A\rightarrow\alpha_i).$
			\item $M_3(A \rightarrow \alpha)=M_3(\alpha),$ \[M_3(\alpha)=\min_{a \in \alpha \wedge a \in N}M_3(a) \div count(a \in \alpha \wedge a \in N).\]
			Метрики терминалов и нетерминалов рассчитываются как в~метрике~2.
			\item Переходим к шагу 2.
		\end{enumerate}
	\end{Metric}
	Сохраняет основные свойства метрики 2.
\end{frame}

\begin{frame}{Улучшенная умная случайная стратегия}
	Является модификацией умной случайной стратегии. Веса продукций и выводов определяются метрикой 3. Которая призвана решить недостаток метрики 2.
	\begin{weight}
		Веса в~соответствии с~метрикой~3 с~последующим извлечением корня:
		
		\[\omega_3(\alpha) = \sqrt{M_3(\alpha)},\] где $\alpha$ "--- группа продукций, продукция или вывод.
	\end{weight}
	Извлечение корня используется чтобы уменьшить разнице между весами.

	
\end{frame}



\begin{frame}{Адаптивная случайная стратегия}

	Призвана строить более длинные выводы. 
	
	Основана на анализе положения игры и смене модели поведения с одной на другую. 
	\begin{itemize}
		\item В начале партии "--- совершать ходы, не приводящие к уменьшению количества нетерминалов.
		
		\item В конце партии "--- совершать ходы, наиболее быстро приводящие выводы к завершению. Применяется переборная стратегия.
	\end{itemize}


\end{frame}

\begin{frame}{Инвертированная случайная стратегия}

	Используется на первом этапе адаптивной случайной стратегии. 
	
	Определяется весами: 
	\begin{weight}
		\label{weight4}
		Инвертированные веса:
		
		\begin{math}
			\omega_4(\alpha) = \begin{cases} 0, & \text{если } M_3(\alpha)=0,\\
				1{,}01 - M_3(\alpha), & \text{иначе},
			\end{cases}
		\end{math}
		
		\noindent где $\alpha$ "--- группа продукций, продукция или вывод.
	\end{weight}
	
	Стратегия не является самостоятельной, поскольку неспособна строить законченные выводы.	
\end{frame}

\begin{frame}{Момент смены модели поведения}
	Переход ко второму будет совершаться, когда \[s_1 \cdot \Omega > s_2,\] где $s_1$ "--- количество нетерминалов в выводах игрока, а $s_2$ "--- количество оставшихся ходов. Стратегия сильно зависит от~параметра $\Omega$.
	
	{
		\centering
		\includegraphics[height=0.48\textheight]{omega.png}
		
	}
\end{frame}

\begin{frame}{Смешанные стратегии}
	\begin{block}{Смешанные стратегии}
		Определяются вероятностным выбором на каждом ходу одной из чистых стратегий.
	\end{block}	
\end{frame}

\begin{frame}{Программная реализация}
	\begin{columns}[T]
		\begin{column}{.5\paperwidth}
			\begin{itemize}
				\item Использовался язык C\# версии .Net Framework 4.8.2.
				\item Реализованы все описанные стратегии.
				\item Есть возможность сыграть против игрока-компьютера.
			\end{itemize}
		\end{column}
		\begin{column}{.45\paperwidth}
			\includegraphics[width=\textwidth]{gui_strategy.png}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}{Сравнительный анализ}
	Частичные результаты турнира на грамматиках с средним шансом выпадения начальных продукций.
	\begin{table}[h!]
		\small
		\setlength\tabcolsep{1pt}
		\centering
		\begin{tabular}{| c | c | c | c | c | c | c |}
			\hline
			& СС        & УУСС      & ГСКС      & СКС       & ПС4       & AAC     \\ \hline
			СС    & 238/256/6 & 35/461/4  & 64/432/4  & 50/449/1  & 12/488/0  & 14/485/1  \\ \hline
			УУСС  & 453/46/1  & 253/243/4 & 282/215/3 & 342/154/4 & 109/389/2 & 105/390/5 \\ \hline
			ГСКС  & 430/69/1  & 207/290/3 & 259/238/3 & 262/234/4 & 83/415/2  & 72/426/2  \\ \hline
			СКС   & 454/45/1  & 168/328/4 & 227/271/2 & 241/251/8 & 38/462/0  & 149/347/4 \\ \hline
			ПС4   & 486/14/0  & 403/95/2  & 427/72/1  & 463/36/1  & 273/223/4 & 247/246/7 \\ \hline
			AAC & 485/14/1  & 390/106/4 & 423/75/2  & 358/140/2 & 252/246/2 & 256/241/3 \\ \hline
		\end{tabular}
	\end{table}
	Шанс выпадения продукции для создания нового вывода $\frac{1}{6}$.
\end{frame}

\begin{frame}{Сравнительный анализ}
	Частичные результаты турнира на грамматиках с низким шансом выпадения начальных продукций.
	\begin{table}[!h]
		\small
		\setlength\tabcolsep{3pt}
		\centering
		\begin{tabular}{| c | c | c | c | c | c |}
			\hline
			& СС         & ГСКС      & СКС        & ПС4        & AAC     \\ \hline
			СС    & 250/238/12 & 185/313/2 & 268/232/0  & 153/341/6  & 91/405/4  \\ \hline
			ГСКС  & 349/145/6  & 265/233/2 & 435/61/4   & 314/184/2  & 120/378/2 \\ \hline
			СКС   & 228/269/3  & 75/423/2  & 233/227/40 & 30/468/2   & 55/443/2  \\ \hline
			ПС4   & 352/141/7  & 200/298/2 & 460/39/1   & 244/244/12 & 89/410/1  \\ \hline
			AAC & 406/93/1   & 374/122/4 & 446/53/1   & 396/103/1  & 228/270/2 \\ \hline
		\end{tabular}
	\end{table}
	
	Шанс выпадения продукции для создания нового вывода $\frac{1}{36}$.
\end{frame}


\section{Итоги}
\begin{frame}{Подведение итогов}
	\begin{itemize}
		\item Наиболее выгодной стратегией является адаптивная случайная стратегия. 
		\item Смешанные стратегии на основе вероятностного смешения не оказались эффективными.
	\end{itemize}
\end{frame}

\begin{frame}%[allowframebreaks]
	\frametitle<presentation>{Литература}
	\begin{thebibliography}{}
		\beamertemplatebookbibitems
		% Если нужно сделать N. вместо [N] 
		% \makeatletter\renewcommand{\@biblabel}[1]{#1.}\makeatother
		\bibitem{litlink1}  Соколов В.~А. Введение в теорию формальных языков. Ярославль: ЯрГУ, 2014.
		\bibitem{litlink2}  Захаров А.~В. Теория игр в общественных науках. М.: ВШЭ, 2015.
		\bibitem{Schuster:2017} \selectlanguage{german}
		Schuster~M. Context-free games on strings and nested words: Dissertation // Technischen Universit\"at Dortmund an der Fakult\"at f\"ur Informatik, 2017. URl:~\url{http://dx.doi.org/10.17877/DE290R-18135}.
		\selectlanguage{russian}
		%		 \selectlanguage{english}
		%		Schuster~M.
		%		Context-free Games on Strings and Nested Words
		%		//, 2017. 214p.
		%		URl:~\url{http://dx.doi.org/10.17877/DE290R-18135}
		%		\selectlanguage{russian}
		\bibitem{Kruglikov2024} Кругликов А. М., Смирнов А. В. Разработка стратегий для игры «Укроти мустанга» // Путь в науку: прикладная математика, информатика и информационные технологии : Тезисы докладов Всероссийской молодёжной научно-практической конференции, Ярославль, 15–19 апреля 2024 года. – Ярославль: ЯРГУ,\\ 2024. – С. 28-31.
	\end{thebibliography}
\end{frame}

\appendix




\end{document}

